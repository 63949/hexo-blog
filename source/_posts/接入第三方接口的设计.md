---
title: 接入第三方接口的设计
date: 2016-02-17 19:27:11
tags: [总结]
---

在公司负责接入了几个第三方接口。现在总结一下。



接入接口，最重要的是稳定性。而接入接口的这个系统，和其他的普通系统不一样，是由两个部分决定的。一个是接口的稳定性，一个是接入系统的稳定性。



接入系统是我们自己写的，是可控的，所以稳定性是可以不断优化的。而第三方接口的稳定性，我们很难干预，如果在投入使用后发现第三方接口的稳定性不达标，是很难补救的。原因有几点，第一，我们使用第三方提供的接口，接口对我们来说是个黑盒，所以如果出了问题，我们是不明白其中的原理的，如果是偶发的问题，在与第三方交涉上，会更加麻烦。第二，如果第三方的技术实力有限导致了接口不稳定，这就不是几句话能解决的问题了。一旦你陷入了不稳定接口的坑里，代价是非常大的，因为在不稳定系统上建立稳定系统是非常非常困难的。如果最后选择了换一个接口，那么付出的时间成本和人力成本也是非常浪费的。



所以在接口接入的调试期 TODO



----

一定要多打日志，每一步都打日志。数据库里的信息也记得全一点。因为一旦涉及接口调用的系统出了问题，需要排除是我方问题还是他方问题，如果他方问题，也得收集详细信息供他们调试。

---

# 



---

接口的类型

同步，异步，超过超时时间的同步，爬虫式接口（快查）

---

---
编码问题
----



## 数据库设计

```
create table xxx_api(
    id int(10) unsigned not null auto_increment,
    user_id int(11) not null comment '用户id',
    api_type varchar(64) not null comment '接口类型',
    params varchar(1024) not null comment '调用参数',
    result varchar(4096) not null comment '接口返回结果',
    create_time timestamp not null default current_timestamp comment '创建时间',
    index (user_id,api_type),
    primary key (id)
)engine=InnoDB default charset=utf8 comment='xxx接口调用信息';
```






